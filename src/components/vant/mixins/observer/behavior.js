'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
var behavior = exports.behavior = Behavior({
  created: function created() {
    var _this = this;

    if (!this.$options) {
      return;
    }

    var cache = {};
    var setData = this.setData;

    var _this$$options = this.$options(),
        computed = _this$$options.computed;

    var keys = Object.keys(computed);

    var calcComputed = function calcComputed() {
      var needUpdate = {};
      keys.forEach(function (key) {
        var value = computed[key].call(_this);

        if (cache[key] !== value) {
          cache[key] = needUpdate[key] = value;
        }
      });
      return needUpdate;
    };

    Object.defineProperty(this, 'setData', {
      writable: true
    });

    this.setData = function (data, callback) {
      data && setData.call(_this, data, callback);
      setData.call(_this, calcComputed());
    };
  },
  attached: function attached() {
    this.setData();
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJlaGF2aW9yLmpzIl0sIm5hbWVzIjpbImJlaGF2aW9yIiwiQmVoYXZpb3IiLCJjcmVhdGVkIiwiX3RoaXMiLCIkb3B0aW9ucyIsImNhY2hlIiwic2V0RGF0YSIsIl90aGlzJCRvcHRpb25zIiwiY29tcHV0ZWQiLCJrZXlzIiwiT2JqZWN0IiwiY2FsY0NvbXB1dGVkIiwibmVlZFVwZGF0ZSIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsImNhbGwiLCJkZWZpbmVQcm9wZXJ0eSIsIndyaXRhYmxlIiwiZGF0YSIsImNhbGxiYWNrIiwiYXR0YWNoZWQiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sSUFBSUEsOEJBQVdDLFNBQVM7QUFDN0JDLFdBQVMsU0FBU0EsT0FBVCxHQUFtQjtBQUMxQixRQUFJQyxRQUFRLElBQVo7O0FBRUEsUUFBSSxDQUFDLEtBQUtDLFFBQVYsRUFBb0I7QUFDbEI7QUFDRDs7QUFFRCxRQUFJQyxRQUFRLEVBQVo7QUFDQSxRQUFJQyxVQUFVLEtBQUtBLE9BQW5COztBQUVBLFFBQUlDLGlCQUFpQixLQUFLSCxRQUFMLEVBQXJCO0FBQUEsUUFDSUksV0FBV0QsZUFBZUMsUUFEOUI7O0FBR0EsUUFBSUMsT0FBT0MsT0FBT0QsSUFBUCxDQUFZRCxRQUFaLENBQVg7O0FBRUEsUUFBSUcsZUFBZSxTQUFTQSxZQUFULEdBQXdCO0FBQ3pDLFVBQUlDLGFBQWEsRUFBakI7QUFDQUgsV0FBS0ksT0FBTCxDQUFhLFVBQVVDLEdBQVYsRUFBZTtBQUMxQixZQUFJQyxRQUFRUCxTQUFTTSxHQUFULEVBQWNFLElBQWQsQ0FBbUJiLEtBQW5CLENBQVo7O0FBRUEsWUFBSUUsTUFBTVMsR0FBTixNQUFlQyxLQUFuQixFQUEwQjtBQUN4QlYsZ0JBQU1TLEdBQU4sSUFBYUYsV0FBV0UsR0FBWCxJQUFrQkMsS0FBL0I7QUFDRDtBQUNGLE9BTkQ7QUFPQSxhQUFPSCxVQUFQO0FBQ0QsS0FWRDs7QUFZQUYsV0FBT08sY0FBUCxDQUFzQixJQUF0QixFQUE0QixTQUE1QixFQUF1QztBQUNyQ0MsZ0JBQVU7QUFEMkIsS0FBdkM7O0FBSUEsU0FBS1osT0FBTCxHQUFlLFVBQVVhLElBQVYsRUFBZ0JDLFFBQWhCLEVBQTBCO0FBQ3ZDRCxjQUFRYixRQUFRVSxJQUFSLENBQWFiLEtBQWIsRUFBb0JnQixJQUFwQixFQUEwQkMsUUFBMUIsQ0FBUjtBQUNBZCxjQUFRVSxJQUFSLENBQWFiLEtBQWIsRUFBb0JRLGNBQXBCO0FBQ0QsS0FIRDtBQUlELEdBcEM0QjtBQXFDN0JVLFlBQVUsU0FBU0EsUUFBVCxHQUFvQjtBQUM1QixTQUFLZixPQUFMO0FBQ0Q7QUF2QzRCLENBQVQsQ0FBZiIsImZpbGUiOiJiZWhhdmlvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgYmVoYXZpb3IgPSBCZWhhdmlvcih7XG4gIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmICghdGhpcy4kb3B0aW9ucykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjYWNoZSA9IHt9O1xuICAgIHZhciBzZXREYXRhID0gdGhpcy5zZXREYXRhO1xuXG4gICAgdmFyIF90aGlzJCRvcHRpb25zID0gdGhpcy4kb3B0aW9ucygpLFxuICAgICAgICBjb21wdXRlZCA9IF90aGlzJCRvcHRpb25zLmNvbXB1dGVkO1xuXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjb21wdXRlZCk7XG5cbiAgICB2YXIgY2FsY0NvbXB1dGVkID0gZnVuY3Rpb24gY2FsY0NvbXB1dGVkKCkge1xuICAgICAgdmFyIG5lZWRVcGRhdGUgPSB7fTtcbiAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGNvbXB1dGVkW2tleV0uY2FsbChfdGhpcyk7XG5cbiAgICAgICAgaWYgKGNhY2hlW2tleV0gIT09IHZhbHVlKSB7XG4gICAgICAgICAgY2FjaGVba2V5XSA9IG5lZWRVcGRhdGVba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZWVkVXBkYXRlO1xuICAgIH07XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3NldERhdGEnLCB7XG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXREYXRhID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgICBkYXRhICYmIHNldERhdGEuY2FsbChfdGhpcywgZGF0YSwgY2FsbGJhY2spO1xuICAgICAgc2V0RGF0YS5jYWxsKF90aGlzLCBjYWxjQ29tcHV0ZWQoKSk7XG4gICAgfTtcbiAgfSxcbiAgYXR0YWNoZWQ6IGZ1bmN0aW9uIGF0dGFjaGVkKCkge1xuICAgIHRoaXMuc2V0RGF0YSgpO1xuICB9XG59KTsiXX0=