'use strict';

var _component = require('./../common/component.js');

(0, _component.VantComponent)({
  relation: {
    name: 'tabbar-item',
    type: 'descendant',
    linked: function linked(target) {
      var _this = this;

      this.data.items.push(target);
      setTimeout(function () {
        _this.setActiveItem();
      });
    },
    unlinked: function unlinked(target) {
      var _this2 = this;

      this.data.items = this.data.items.filter(function (item) {
        return item !== target;
      });
      setTimeout(function () {
        _this2.setActiveItem();
      });
    }
  },
  props: {
    active: Number,
    fixed: {
      type: Boolean,
      value: true
    },
    zIndex: {
      type: Number,
      value: 1
    }
  },
  data: {
    items: [],
    currentActive: -1
  },
  watch: {
    active: function active(_active) {
      this.setData({
        currentActive: _active
      });
      this.setActiveItem();
    }
  },
  created: function created() {
    this.setData({
      currentActive: this.data.active
    });
  },
  methods: {
    setActiveItem: function setActiveItem() {
      var _this3 = this;

      this.data.items.forEach(function (item, index) {
        item.setActive(index === _this3.data.currentActive);
      });
    },
    onChange: function onChange(child) {
      var active = this.data.items.indexOf(child);

      if (active !== this.data.currentActive && active !== -1) {
        this.$emit('change', active);
        this.setData({
          currentActive: active
        });
        this.setActiveItem();
      }
    }
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJlbGF0aW9uIiwibmFtZSIsInR5cGUiLCJsaW5rZWQiLCJ0YXJnZXQiLCJfdGhpcyIsImRhdGEiLCJpdGVtcyIsInB1c2giLCJzZXRUaW1lb3V0Iiwic2V0QWN0aXZlSXRlbSIsInVubGlua2VkIiwiX3RoaXMyIiwiZmlsdGVyIiwiaXRlbSIsInByb3BzIiwiYWN0aXZlIiwiTnVtYmVyIiwiZml4ZWQiLCJCb29sZWFuIiwidmFsdWUiLCJ6SW5kZXgiLCJjdXJyZW50QWN0aXZlIiwid2F0Y2giLCJfYWN0aXZlIiwic2V0RGF0YSIsImNyZWF0ZWQiLCJtZXRob2RzIiwiX3RoaXMzIiwiZm9yRWFjaCIsImluZGV4Iiwic2V0QWN0aXZlIiwib25DaGFuZ2UiLCJjaGlsZCIsImluZGV4T2YiLCIkZW1pdCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQSw4QkFBYztBQUNaQSxZQUFVO0FBQ1JDLFVBQU0sYUFERTtBQUVSQyxVQUFNLFlBRkU7QUFHUkMsWUFBUSxTQUFTQSxNQUFULENBQWdCQyxNQUFoQixFQUF3QjtBQUM5QixVQUFJQyxRQUFRLElBQVo7O0FBRUEsV0FBS0MsSUFBTCxDQUFVQyxLQUFWLENBQWdCQyxJQUFoQixDQUFxQkosTUFBckI7QUFDQUssaUJBQVcsWUFBWTtBQUNyQkosY0FBTUssYUFBTjtBQUNELE9BRkQ7QUFHRCxLQVZPO0FBV1JDLGNBQVUsU0FBU0EsUUFBVCxDQUFrQlAsTUFBbEIsRUFBMEI7QUFDbEMsVUFBSVEsU0FBUyxJQUFiOztBQUVBLFdBQUtOLElBQUwsQ0FBVUMsS0FBVixHQUFrQixLQUFLRCxJQUFMLENBQVVDLEtBQVYsQ0FBZ0JNLE1BQWhCLENBQXVCLFVBQVVDLElBQVYsRUFBZ0I7QUFDdkQsZUFBT0EsU0FBU1YsTUFBaEI7QUFDRCxPQUZpQixDQUFsQjtBQUdBSyxpQkFBVyxZQUFZO0FBQ3JCRyxlQUFPRixhQUFQO0FBQ0QsT0FGRDtBQUdEO0FBcEJPLEdBREU7QUF1QlpLLFNBQU87QUFDTEMsWUFBUUMsTUFESDtBQUVMQyxXQUFPO0FBQ0xoQixZQUFNaUIsT0FERDtBQUVMQyxhQUFPO0FBRkYsS0FGRjtBQU1MQyxZQUFRO0FBQ05uQixZQUFNZSxNQURBO0FBRU5HLGFBQU87QUFGRDtBQU5ILEdBdkJLO0FBa0NaZCxRQUFNO0FBQ0pDLFdBQU8sRUFESDtBQUVKZSxtQkFBZSxDQUFDO0FBRlosR0FsQ007QUFzQ1pDLFNBQU87QUFDTFAsWUFBUSxTQUFTQSxNQUFULENBQWdCUSxPQUFoQixFQUF5QjtBQUMvQixXQUFLQyxPQUFMLENBQWE7QUFDWEgsdUJBQWVFO0FBREosT0FBYjtBQUdBLFdBQUtkLGFBQUw7QUFDRDtBQU5JLEdBdENLO0FBOENaZ0IsV0FBUyxTQUFTQSxPQUFULEdBQW1CO0FBQzFCLFNBQUtELE9BQUwsQ0FBYTtBQUNYSCxxQkFBZSxLQUFLaEIsSUFBTCxDQUFVVTtBQURkLEtBQWI7QUFHRCxHQWxEVztBQW1EWlcsV0FBUztBQUNQakIsbUJBQWUsU0FBU0EsYUFBVCxHQUF5QjtBQUN0QyxVQUFJa0IsU0FBUyxJQUFiOztBQUVBLFdBQUt0QixJQUFMLENBQVVDLEtBQVYsQ0FBZ0JzQixPQUFoQixDQUF3QixVQUFVZixJQUFWLEVBQWdCZ0IsS0FBaEIsRUFBdUI7QUFDN0NoQixhQUFLaUIsU0FBTCxDQUFlRCxVQUFVRixPQUFPdEIsSUFBUCxDQUFZZ0IsYUFBckM7QUFDRCxPQUZEO0FBR0QsS0FQTTtBQVFQVSxjQUFVLFNBQVNBLFFBQVQsQ0FBa0JDLEtBQWxCLEVBQXlCO0FBQ2pDLFVBQUlqQixTQUFTLEtBQUtWLElBQUwsQ0FBVUMsS0FBVixDQUFnQjJCLE9BQWhCLENBQXdCRCxLQUF4QixDQUFiOztBQUVBLFVBQUlqQixXQUFXLEtBQUtWLElBQUwsQ0FBVWdCLGFBQXJCLElBQXNDTixXQUFXLENBQUMsQ0FBdEQsRUFBeUQ7QUFDdkQsYUFBS21CLEtBQUwsQ0FBVyxRQUFYLEVBQXFCbkIsTUFBckI7QUFDQSxhQUFLUyxPQUFMLENBQWE7QUFDWEgseUJBQWVOO0FBREosU0FBYjtBQUdBLGFBQUtOLGFBQUw7QUFDRDtBQUNGO0FBbEJNO0FBbkRHLENBQWQiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWYW50Q29tcG9uZW50IH0gZnJvbSAnLi4vY29tbW9uL2NvbXBvbmVudCc7XG5WYW50Q29tcG9uZW50KHtcbiAgcmVsYXRpb246IHtcbiAgICBuYW1lOiAndGFiYmFyLWl0ZW0nLFxuICAgIHR5cGU6ICdkZXNjZW5kYW50JyxcbiAgICBsaW5rZWQ6IGZ1bmN0aW9uIGxpbmtlZCh0YXJnZXQpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuZGF0YS5pdGVtcy5wdXNoKHRhcmdldCk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuc2V0QWN0aXZlSXRlbSgpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICB1bmxpbmtlZDogZnVuY3Rpb24gdW5saW5rZWQodGFyZ2V0KSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy5kYXRhLml0ZW1zID0gdGhpcy5kYXRhLml0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbSAhPT0gdGFyZ2V0O1xuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLnNldEFjdGl2ZUl0ZW0oKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgcHJvcHM6IHtcbiAgICBhY3RpdmU6IE51bWJlcixcbiAgICBmaXhlZDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSxcbiAgICB6SW5kZXg6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIHZhbHVlOiAxXG4gICAgfVxuICB9LFxuICBkYXRhOiB7XG4gICAgaXRlbXM6IFtdLFxuICAgIGN1cnJlbnRBY3RpdmU6IC0xXG4gIH0sXG4gIHdhdGNoOiB7XG4gICAgYWN0aXZlOiBmdW5jdGlvbiBhY3RpdmUoX2FjdGl2ZSkge1xuICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgY3VycmVudEFjdGl2ZTogX2FjdGl2ZVxuICAgICAgfSk7XG4gICAgICB0aGlzLnNldEFjdGl2ZUl0ZW0oKTtcbiAgICB9XG4gIH0sXG4gIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIGN1cnJlbnRBY3RpdmU6IHRoaXMuZGF0YS5hY3RpdmVcbiAgICB9KTtcbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIHNldEFjdGl2ZUl0ZW06IGZ1bmN0aW9uIHNldEFjdGl2ZUl0ZW0oKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdGhpcy5kYXRhLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGl0ZW0uc2V0QWN0aXZlKGluZGV4ID09PSBfdGhpczMuZGF0YS5jdXJyZW50QWN0aXZlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGNoaWxkKSB7XG4gICAgICB2YXIgYWN0aXZlID0gdGhpcy5kYXRhLml0ZW1zLmluZGV4T2YoY2hpbGQpO1xuXG4gICAgICBpZiAoYWN0aXZlICE9PSB0aGlzLmRhdGEuY3VycmVudEFjdGl2ZSAmJiBhY3RpdmUgIT09IC0xKSB7XG4gICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIGFjdGl2ZSk7XG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgY3VycmVudEFjdGl2ZTogYWN0aXZlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldEFjdGl2ZUl0ZW0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pOyJdfQ==